<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Habit Tracker</title>
<link rel="stylesheet" href="style.css">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#4CAF50">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<div class="app-container">

  <!-- Header -->
  <header>
    <h1>Habit Tracker</h1>
    <button id="settings-btn">âš™ï¸</button>
  </header>

  <!-- Settings Modal -->
  <div id="settings-modal" class="modal">
    <h2>Settings</h2>
    <label>
      <input type="checkbox" id="dark-mode-toggle"> Dark Mode
    </label>
    <label>
      Theme: 
      <select id="theme-select">
        <option value="default">Default</option>
        <option value="blue-mode">Blue</option>
        <option value="purple-mode">Purple</option>
      </select>
    </label>
    <label>
      <input type="checkbox" id="ai-toggle" checked> Show AI Suggestions
    </label>
    <button id="reset-data-btn">Reset All Data</button>
    <button id="close-settings">Close</button>
  </div>

  <!-- Add Habit -->
  <section class="add-habit card">
    <input type="text" id="habit-input" placeholder="Add a new habit">
    <button id="add-habit-btn">Add Habit</button>
  </section>

  <!-- Habit List -->
  <section id="habit-list-section">
    <h2>Your Habits</h2>
    <div id="habit-list" class="habit-cards"></div>
  </section>

  <!-- Points & Stats -->
  <section id="points-stats" class="card">
    <p id="points">Points: 0</p>
    <p id="today-completed">Habits completed today: 0</p>
    <p id="longest-streak">Longest streak: 0</p>
  </section>

  <!-- Analytics -->
  <section id="analytics-panel" class="card">
    <h3>ğŸ“ˆ Analytics & Insights (Pro Only)</h3>
    <p id="weekly-completed">Habits completed this week: 0</p>
    <p id="monthly-completed">Habits completed this month: 0</p>
    <canvas id="weekly-chart"></canvas>
    <canvas id="monthly-chart"></canvas>
  </section>

  <!-- AI Suggestions -->
  <section id="ai-suggestions-panel" class="card">
    <h3>ğŸ¤– AI Suggestions & Motivation</h3>
    <ul id="ai-suggestions-list"></ul>
  </section>

</div>

<script src="app.js"></script>
<script>
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("/service-worker.js")
    .then(() => console.log("Service Worker Registered"));
}

// Install Prompt
let deferredPrompt;
window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault();
  deferredPrompt = e;
  const installBtn = document.createElement("button");
  installBtn.textContent = "Install App";
  installBtn.style.position = "fixed";
  installBtn.style.bottom = "20px";
  installBtn.style.right = "20px";
  installBtn.style.zIndex = "1000";
  document.body.appendChild(installBtn);
  installBtn.addEventListener("click", async () => {
    installBtn.style.display = "none";
    deferredPrompt.prompt();
    const { outcome } = await deferredPrompt.userChoice;
    console.log("User choice:", outcome);
    deferredPrompt = null;
  });
});
</script>
</body>
  </html>
